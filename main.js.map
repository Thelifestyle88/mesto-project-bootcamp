{"version":3,"file":"main.js","mappings":"mBAgCO,SAASA,EAAkBC,EAAWC,IANtC,SAAyBD,GAC5B,OAAOA,EAAUE,MAAK,SAACC,GACnB,OAAQA,EAAUC,SAASC,KAC/B,GACJ,CAGQC,CAAgBN,IAIhBC,EAAcM,UAAUC,OAAO,+BAC/BP,EAAcQ,gBAAgB,YAAY,KAJ1CR,EAAcM,UAAUG,IAAI,+BAC5BT,EAAcU,aAAa,YAAY,GAK/C,CAEO,SAASC,IACKC,MAAMC,KAAKC,SAASC,iBAAiB,iBAC7CC,SAAQ,SAACC,GAIf,IAA2BC,EACxBnB,EACAC,EAFwBkB,EAHRD,EAIhBlB,EAAYa,MAAMC,KAAKK,EAAYH,iBAAiB,uBACpDf,EAAgBkB,EAAYC,cAAc,uBAChDrB,EAAkBC,EAAWC,GAC7BD,EAAUiB,SAAQ,SAACd,GACfA,EAAUkB,iBAAiB,SAAS,YAnCrC,SAAeF,EAAahB,GAC1BA,EAAUC,SAASC,MARrB,SAAwBc,EAAahB,GACxC,IAAMmB,EAAeH,EAAYC,cAAc,IAAD,OAAKjB,EAAUoB,GAAE,WAC/DpB,EAAUI,UAAUC,OAAO,2BAC3Bc,EAAaf,UAAUC,OAAO,GAAD,OAAIL,EAAUoB,GAAE,kBAC7CD,EAAaE,YAAc,EAC/B,CAMQC,CAAeN,EAAahB,GAlB7B,SAAwBgB,EAAahB,EAAWuB,GACnD,IAAMJ,EAAeH,EAAYC,cAAc,IAAD,OAAKjB,EAAUoB,GAAE,WAC/DpB,EAAUI,UAAUG,IAAI,2BACxBY,EAAaE,YAAcE,EAC3BJ,EAAaf,UAAUG,IAAI,GAAD,OAAIP,EAAUoB,GAAE,iBAC9C,CAWQI,CAAeR,EAAahB,EAAWA,EAAUyB,kBAIzD,CA8BYvB,CAAMc,EAAahB,GACnBJ,EAAkBC,EAAWC,EACjC,GACJ,GAXA,GACJ,CA/CwBc,SAASK,cAAc,uBACxBL,SAASK,cAAc,sBACxBL,SAASK,cAAc,qBCF7C,IAAMS,EAAS,CACXC,QAAS,4CACTC,OAAQ,CACJC,cAAe,yCAIvB,SAASC,EAAcC,GACnB,OAAIA,EAAIC,GACGD,EAAIE,OAERF,EAAIE,OACNC,MAAK,SAACC,GAEH,OADAA,EAAIC,WAAaL,EAAIM,OACdC,QAAQC,OAAOJ,EAC1B,GACR,CChBA,IAAMK,EAAW5B,SAASK,cAAc,aAEjC,SAASwB,EAAmBC,GAC/BF,EAASG,QAAQD,EACrB,CCAA,IAAME,EAAUhC,SAASK,cAAc,YAAY4B,QAC7CC,EAAiBlC,SAASK,cAAc,8BAE9C,SAAS8B,EAAiBC,GACtB,IC0D0BC,EAAKC,ED1D/B,EAAiCF,EAAzBG,OC0DkBF,ED1DL,EAAHA,IC0DaC,ED1DL,EAAHA,IC2DvBE,EAAUH,IAAMA,EAChBG,EAAUF,IAAMA,EAChBG,EAAiBhC,YAAc6B,EAC/BI,EAAUC,ED5Dd,CAGA,SAASC,EAAgBR,GACrB,IFeuBS,EAAQC,EEfzBC,EAAOX,EAAIG,OAAOS,QAAQ,YAC1BC,EAAaF,EAAK1C,cAAc,0BFcfwC,EEbZE,EAAKG,IFaeJ,EEbVC,EAAKI,OAAOC,SAASL,EAAKM,SFcxCC,MAAM,GAAD,OAAIxC,EAAOC,QAAO,wBAAgB8B,GAAU,CACpDU,OAAQT,EAAU,SAAW,MAC7BU,QAAS1C,EAAOE,SAEfM,KAAKJ,IEjBLI,MAAK,SAACH,GACH4B,EAAKI,OAAShC,EAAIsC,MAAMC,KAAI,SAACC,GAAI,OAAKA,EAAKT,GAAG,IAC9CD,EAAWxC,YAAcsC,EAAKI,OAAOS,OACjCb,EAAKI,OAAOC,SAASL,EAAKM,SAC1BjB,EAAIG,OAAO/C,UAAUG,IAAI,uBAEzByC,EAAIG,OAAO/C,UAAUC,OAAO,sBAEpC,GACR,CAEA,SAASoE,EAAkBzB,GACvB,IAAMW,EAAOX,EAAIG,OAAOS,QAAQ,YAChCc,eAAeC,QAAQ,eAAgBhB,EAAKG,KC+DxCY,eAAeE,QAAQ,iBACvBtB,EAAUuB,ED9DlB,CAGO,SAASC,EAASC,EAASC,GAC9B,IAAMrB,EAAOf,EAAQ3B,cAAc,YAAYgE,WAAU,GACnDC,EAAevB,EAAK1C,cAAc,kBACxC0C,EAAK1C,cAAc,mBAAmBI,YAAc0D,EAAQI,KACzCxB,EAAK1C,cAAc,yBAC3BI,YAAc0D,EAAQV,MAAMG,OACvCU,EAAajC,IAAM8B,EAAQK,KAC3BF,EAAahC,IAAM6B,EAAQI,KAC3B,IAAME,EAAa1B,EAAK1C,cAAc,kBACvB8D,EAAQjB,IACvBH,EAAKG,IAAMiB,EAAQjB,IACnBH,EAAKM,QAAUe,EACfrB,EAAKI,OAASgB,EAAQV,MAAMC,KAAI,SAACC,GAAI,OAAKA,EAAKT,GAAG,IAClDH,EAAK2B,SAAWP,EAAQQ,MAAMzB,IAC9B,IAAM0B,EAAc7B,EAAK1C,cAAc,mBAevC,OAdI8D,EAAQQ,MAAMzB,MAAQH,EAAKM,SAC3BuB,EAAYpF,UAAUG,IAAI,2BAE9BwE,EAAQV,MAAMvD,SAAQ,SAAA2E,GACdA,EAAG3B,MAAQH,EAAKM,SAChBoB,EAAWjF,UAAUG,IAAI,sBAEjC,IACAiF,EAAYtE,iBAAiB,QAASuD,GAEtBM,EAAQV,MAAMC,KAAI,SAACC,GAAI,OAAKA,EAAKT,GAAG,IAAEE,SAAS,4BAE/DqB,EAAWnE,iBAAiB,QAASsC,GACrC0B,EAAahE,iBAAiB,QAAS6B,GAChCY,CACX,CE/DA,IAAM+B,EAAe9E,SAASK,cAAc,mBACtC0E,EAAkB/E,SAASK,cAAc,sBACzC2E,EAAgBhF,SAASK,cAAc,mBAQtC,SAAS4E,EAAYC,GACxBJ,EAAarE,YAAcyE,EAAKX,KAChCQ,EAAgBtE,YAAcyE,EAAKC,MACnCH,EAAc3C,IAAM6C,EAAKE,MAC7B,CDXA,IAAM5C,EAAYxC,SAASK,cAAc,gBACnCoC,EAAmBzC,SAASK,cAAc,uBAC1CsC,EAAa3C,SAASK,cAAc,gBACpCgF,EAAsBrF,SAASK,cAAc,kCAC7CiF,EAAyBtF,SAASK,cAAc,qCAChDkF,EAAuBvF,SAASK,cAAc,iCAC9CmF,EAAwBxF,SAASK,cAAc,oCAC/CoF,EAAezF,SAASK,cAAc,uBACtCqF,EAAkB1F,SAASK,cAAc,qBACzCsF,EAAgB3F,SAASK,cAAc,oBACvCuF,EAAoB5F,SAASC,iBAAiB,wBAC9C4F,EAAa7F,SAASK,cAAc,uBACpCyF,EAAmB9F,SAASK,cAAc,uBAC1C0F,EAAc/F,SAASK,cAAc,kCACrC2F,EAAchG,SAASK,cAAc,sBACrC4D,EAAqBjE,SAASK,cAAc,iBAC5C4F,EAAajG,SAASK,cAAc,uBACpC6F,EAAoBlG,SAASK,cAAc,4BAC3C8F,EAAmBnG,SAASK,cAAc,8BAC1C6B,EAAiBlC,SAASK,cAAc,8BAEvC,SAASqC,EAAU0D,GACtBA,EAAM5G,UAAUG,IAAI,gBACpBK,SAASM,iBAAiB,QAAS+F,EACvC,CAEO,SAASC,EAAWF,GACvBA,EAAM5G,UAAUC,OAAO,gBACvBO,SAASuG,oBAAoB,QAASF,EAC1C,CAEA,SAASG,EAAmBpE,GACpBA,EAAIG,SAAWH,EAAIqE,eACnBH,EAAWlE,EAAIG,OAEvB,CAEA,SAASmE,EAAiBC,GAEtBL,EADcK,EAAKpE,OAAOS,QAAQ,UAEtC,CAcA,SAASqD,EAAejE,GACpB,IAAMwE,EAAc5G,SAASK,cAAc,iBAC3B,WAAZ+B,EAAIyE,KAAoBD,GACxBN,EAAWM,EAEnB,CAuCA,SAASE,IACLzB,EAAoB0B,MAAQ,GAC5BzB,EAAuByB,MAAQ,EACnC,CAEA,SAASC,IACLjB,EAAYgB,MAAQ,EACxB,C,0GEtGA,IAAME,EAAoBjH,SAASK,cAAc,yBAC3C6G,EAAiBlH,SAASK,cAAc,wBACxC8G,EAAanH,SAASK,cAAc,oBAE1CqB,QAAQ0F,IAAI,CLQD9D,MAAM,GAAD,OAAIxC,EAAOC,QAAO,YAAY,CACtCwC,OAAQ,MACRC,QAAS1C,EAAOE,SAGfM,KAAKJ,GA4CHoC,MAAM,GAAD,OAAIxC,EAAOC,QAAO,SAAS,CACnCwC,OAAQ,MACRC,QAAS1C,EAAOE,SAEfM,KAAKJ,KK5DTI,MAAK,YAAmB,I,IAAA,G,EAAA,E,4CAAA,I,o2BAAjB4D,EAAI,KAAEmC,EAAK,KACfpC,EAAYC,GACZpB,eAAeC,QAAQ,SAAUmB,EAAKhC,KACtCmE,EAAMnH,SAAQ,SAACyD,GAAI,OAAK9B,EAAmBqC,EAASP,EAAMuB,EAAKhC,KAAK,GACxE,IACCoE,MAAMC,QAAQC,OAEnB3H,IF+JI4F,EAAanF,iBAAiB,UAVlC,SAA8B8B,GAzD9B,IACUW,EAyDNX,EAAIqF,iBAlHJvF,EAAezB,YAAc,cDY1B,SAAiBsC,IF9BjB,SAAoBA,GACvB,OAAOO,MAAM,GAAD,OAAIxC,EAAOC,QAAO,UAAU,CACpCwC,OAAQ,OACRC,QAAS,CACLvC,cAAe,uCACf,eAAgB,oBAEpByG,KAAMC,KAAKC,UACP7E,KAIHzB,KAAKJ,EACd,EEkBI2G,CAAW9E,GACNzB,MAAK,SAACH,GACHU,EAAmBqC,EAAS/C,EAAK2C,eAAeE,QAAQ,WAC5D,IACC8D,SAAQ,kBAAM5F,EAAezB,YAAc,SAAS,GAC7D,CCkGIsH,GA3DMhF,EAAO,CAAC,GACTwB,KAAOc,EAAoB0B,MAChChE,EAAKyB,KAAOc,EAAuByB,MAC5BhE,IAyDPuD,EAAWX,GACXmB,GACJ,IAKIpB,EAAgBpF,iBAAiB,UAtCrC,SAA6B8B,GAvB7B,IACU4F,EAuBN5F,EAAIqF,iBA/FJvB,EAAkBzF,YAAc,gBHK7B,SAAqBuH,GACxB,OAAO1E,MAAM,GAAD,OAAIxC,EAAOC,QAAO,YAAY,CACtCwC,OAAQ,QACRC,QAAS,CACLvC,cAAe,uCACf,eAAgB,oBAEpByG,KAAMC,KAAKC,UACPI,KAGH1G,KAAKJ,EAEd,CG+EI+G,EAzBMD,EAAU,CAAC,EACjBA,EAAQzD,KAAOgB,EAAqBwB,MACpCiB,EAAQ7C,MAAQK,EAAsBuB,MAC/BiB,IAuBF1G,MAAK,SAAC0G,GACH/C,EAAY+C,EAChB,IACCF,SAAQ,kBAAM5B,EAAkBzF,YAAc,WAAW,IAC9D6F,EAAWR,EACf,IA8BID,EAAWvF,iBAAiB,UA5BhC,SAA6B8B,GHpEtB,IAAsBoC,EGqEzBpC,EAAIqF,iBAtGJtB,EAAiB1F,YAAc,iBHiCN+D,EG2CVuB,EAAYgB,MH1CpBzD,MAAM,GAAD,OAAIxC,EAAOC,QAAO,mBAAmB,CAC7CwC,OAAQ,QACRC,QAAS,CACLvC,cAAe,uCACf,eAAgB,oBAEpByG,KAAMC,KAAKC,UAAU,CACjBxC,OAAQ,GAAF,OAAKZ,OAGdlD,KAAKJ,IG6DLI,MAAK,SAAA0G,GAAO,OAAI/C,EAAY+C,EAAQ,IACpCF,SAAQ,kBAAM3B,EAAiB1F,YAAc,WAAW,IAC7DuG,IACAV,EAAWN,EACf,IAqBIC,EAAW3F,iBAAiB,UAvGhC,SAAiC8B,GAC7BA,EAAIqF,iBACJ,IHLuB5E,EGKjBqF,EAAepE,eAAeE,QAAQ,gBACtCmE,EAAcrI,MAAMC,KAAKC,SAASC,iBAAiB,aAAamI,MAAK,SAAAzE,GACvE,OAAOA,EAAKT,KAAOgF,CACvB,KHRuBrF,EGSZqF,EHPJ5E,MAAM,GAAD,OAAIxC,EAAOC,QAAO,iBAAS8B,GAAU,CAC7CU,OAAQ,SACRC,QAAS1C,EAAOE,SAEfM,KAAKJ,IGILI,MAAK,WACF6G,EAAY1I,QAChB,IAdJ6G,EAAWrC,GACXH,eAAeuE,WAAW,eAe9B,IA6FIvI,MAAMC,KAAKC,SAASC,iBAAiB,WAAWC,SAAQ,SAACkG,GACrDA,EAAM9F,iBAAiB,QAASkG,EACpC,IACA1G,MAAMC,KAAK6F,GAAmB1F,SAAQ,SAACoI,GACnCA,EAAYhI,iBAAiB,QAASoG,EAC1C,IErKJO,EAAkB3G,iBAAiB,SFkH5B,WALP,IAA0B4E,IC3Hf,CAAEX,KAFIO,EAAarE,YAEX0E,MADDJ,EAAgBtE,aD6H9B8E,EAAqBwB,MAAQ7B,EAAKX,KAClCiB,EAAsBuB,MAAQ7B,EAAKC,MAKnCzC,EAAUoD,EACd,IEnHAoB,EAAe5G,iBAAiB,SF0IzB,WACHwG,IACAjH,IACA6C,EAAUiD,EACd,IE5IAwB,EAAW7G,iBAAiB,SFuErB,WACH0G,IACAtE,EAAUsD,EACd,G","sources":["webpack://mesto-project-bootcamp/./src/validate.js","webpack://mesto-project-bootcamp/./src/api.js","webpack://mesto-project-bootcamp/./src/container.js","webpack://mesto-project-bootcamp/./src/card.js","webpack://mesto-project-bootcamp/./src/modal.js","webpack://mesto-project-bootcamp/./src/profile.js","webpack://mesto-project-bootcamp/./src/index.js"],"sourcesContent":["const popupCreateForm = document.querySelector('.popup__form_create')\r\nconst popupFormError = document.querySelector('.popup__form-error')\r\nconst popupEditForm = document.querySelector('.popup__form_edit')\r\n\r\nexport function showInputError(formElement, inputElem, errMessage) {\r\n    const errorElement = formElement.querySelector(`.${inputElem.id}-error`);\r\n    inputElem.classList.add('popup__form-input_error');\r\n    errorElement.textContent = errMessage\r\n    errorElement.classList.add(`${inputElem.id}-error_active`);\r\n};\r\n\r\nexport function hideInputError(formElement, inputElem) {\r\n    const errorElement = formElement.querySelector(`.${inputElem.id}-error`);\r\n    inputElem.classList.remove('popup__form-input_error');\r\n    errorElement.classList.remove(`${inputElem.id}-error_active`);\r\n    errorElement.textContent = ''\r\n};\r\n\r\nexport function valid(formElement, inputElem) {\r\n    if (!inputElem.validity.valid) {\r\n        showInputError(formElement, inputElem, inputElem.validationMessage);\r\n    } else {\r\n        hideInputError(formElement, inputElem);\r\n    }\r\n};\r\n\r\nexport function hasInvalidInput(inputList) {\r\n    return inputList.some((inputElem) => {\r\n        return !inputElem.validity.valid\r\n    })\r\n}\r\n\r\nexport function toggleButtonState(inputList, buttonElement) {\r\n    if (hasInvalidInput(inputList)) {\r\n        buttonElement.classList.add('popup__form-submit_inactive');\r\n        buttonElement.setAttribute('disabled', true)\r\n    } else {\r\n        buttonElement.classList.remove('popup__form-submit_inactive');\r\n        buttonElement.removeAttribute('disabled', true)\r\n    }\r\n};\r\n\r\nexport function activeValid() {\r\n    const formList = Array.from(document.querySelectorAll('.popup__form'))\r\n    formList.forEach((formElem) => {\r\n        setEventListeners(formElem)\r\n    })\r\n}\r\nexport function setEventListeners(formElement) {\r\n    const inputList = Array.from(formElement.querySelectorAll('.popup__form-input'));\r\n    const buttonElement = formElement.querySelector('.popup__form-submit');\r\n    toggleButtonState(inputList, buttonElement)\r\n    inputList.forEach((inputElem) => {\r\n        inputElem.addEventListener('input', () => {\r\n            valid(formElement, inputElem)\r\n            toggleButtonState(inputList, buttonElement)\r\n        })\r\n    })\r\n}\r\n\r\n\r\nexport function resetEditForm() {\r\n    popupEditForm.reset()\r\n    popupCreateForm.reset()\r\n    popupFormError.textContent = ''\r\n}\r\n","const config = {\r\n    baseUrl: 'https://nomoreparties.co/v1/wbf-cohort-3/',\r\n    header: {\r\n        authorization: '9035a3ae-3144-4c5d-a2fb-c77d4c0cdff6'\r\n    }\r\n}\r\n\r\nfunction checkResponse(res) {\r\n    if (res.ok) {\r\n        return res.json();\r\n    }\r\n    return res.json()\r\n        .then((err) => {\r\n            err.statusCode = res.status\r\n            return Promise.reject(err);\r\n        })\r\n}\r\n\r\n\r\nexport function getProfile() {\r\n    return fetch(`${config.baseUrl}users/me`, {\r\n        method: 'GET',\r\n        headers: config.header\r\n\r\n    })\r\n        .then(checkResponse)\r\n}\r\n\r\n\r\nexport function toggleLike(cardId, isLiked) {\r\n    return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n        method: isLiked ? 'DELETE' : 'PUT',\r\n        headers: config.header\r\n    })\r\n        .then(checkResponse)\r\n}\r\n\r\n\r\nexport function uploadCard(card) {\r\n    return fetch(`${config.baseUrl}/cards`, {\r\n        method: 'POST',\r\n        headers: {\r\n            authorization: '9035a3ae-3144-4c5d-a2fb-c77d4c0cdff6',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(\r\n            card\r\n        )\r\n\r\n    })\r\n        .then(checkResponse)\r\n}\r\n\r\nexport function editProfile(profile) {\r\n    return fetch(`${config.baseUrl}users/me`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n            authorization: '9035a3ae-3144-4c5d-a2fb-c77d4c0cdff6',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(\r\n            profile\r\n        )\r\n    })\r\n        .then(checkResponse)\r\n\r\n}\r\n\r\nexport function getCards() {\r\n    return fetch(`${config.baseUrl}cards`, {\r\n        method: 'GET',\r\n        headers: config.header\r\n    })\r\n        .then(checkResponse)\r\n}\r\n\r\nexport function cardDelete(cardId) {\r\n\r\n    return fetch(`${config.baseUrl}cards/${cardId}`, {\r\n        method: 'DELETE',\r\n        headers: config.header\r\n    })\r\n        .then(checkResponse)\r\n}\r\n\r\nexport function changeAvatar(link) {\r\n    return fetch(`${config.baseUrl}users/me/avatar`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n            authorization: '9035a3ae-3144-4c5d-a2fb-c77d4c0cdff6',\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n            avatar: `${link}`\r\n        })\r\n    })\r\n        .then(checkResponse)\r\n}","const elements = document.querySelector('.elements')\r\n\r\nexport function addCardToContainer(cardNode) {\r\n    elements.prepend(cardNode)\r\n}","import { toggleLike, uploadCard } from './api.js';\r\nimport { openViewModal, openDeleteCardConfirm } from './modal.js'\r\nimport { addCardToContainer } from './container.js';\r\n\r\nconst element = document.querySelector('#element').content\r\nconst cardSaveButton = document.querySelector('.popup__form-submit-create')\r\n\r\nfunction handleImageClick(evt) {\r\n    const { target: { src, alt } } = evt;\r\n    openViewModal(src, alt);\r\n};\r\n\r\n\r\nfunction handleLikeClick(evt) {\r\n    const card = evt.target.closest('.element')\r\n    const likesCount = card.querySelector('.element__likes-count')\r\n    toggleLike(card._id, card._likes.includes(card._userId))\r\n        .then((res) => {\r\n            card._likes = res.likes.map((item) => item._id)\r\n            likesCount.textContent = card._likes.length\r\n            if (card._likes.includes(card._userId)) {\r\n                evt.target.classList.add('element__like_black')\r\n            } else {\r\n                evt.target.classList.remove('element__like_black')\r\n            }\r\n        })\r\n}\r\n\r\nfunction handleDeleteClick(evt) {\r\n    const card = evt.target.closest('.element')\r\n    sessionStorage.setItem('id-to-delete', card._id)\r\n    openDeleteCardConfirm()\r\n}\r\n\r\n\r\nexport function makeCard(cardObj, user_id) {\r\n    const card = element.querySelector('.element').cloneNode(true)\r\n    const elementPhoto = card.querySelector('.element__foto')\r\n    card.querySelector('.element__title').textContent = cardObj.name\r\n    const likesCount = card.querySelector('.element__likes-count')\r\n    likesCount.textContent = cardObj.likes.length\r\n    elementPhoto.src = cardObj.link\r\n    elementPhoto.alt = cardObj.name\r\n    const likeButton = card.querySelector('.element__like')\r\n    const cardId = cardObj._id\r\n    card._id = cardObj._id;\r\n    card._userId = user_id;\r\n    card._likes = cardObj.likes.map((item) => item._id)\r\n    card._ownerId = cardObj.owner._id\r\n    const trashButton = card.querySelector('.element__trash')\r\n    if (cardObj.owner._id !== card._userId) {\r\n        trashButton.classList.add('element__trash_inactive')\r\n    }\r\n    cardObj.likes.forEach(el => {\r\n        if (el._id === card._userId) {\r\n            likeButton.classList.add('element__like_black')\r\n        }\r\n    })\r\n    trashButton.addEventListener('click', handleDeleteClick)\r\n\r\n    const isLiked = cardObj.likes.map((item) => item._id).includes('362fa7fb4176231c9cf4f10d')\r\n\r\n    likeButton.addEventListener('click', handleLikeClick)\r\n    elementPhoto.addEventListener('click', handleImageClick)\r\n    return card\r\n}\r\n\r\n\r\nexport function addCard(card) {\r\n    uploadCard(card)\r\n        .then((res) => {\r\n            addCardToContainer(makeCard(res, sessionStorage.getItem(\"userId\")))\r\n        })\r\n        .finally(() => cardSaveButton.textContent = 'Создать')\r\n}","import { activeValid } from \"./validate\";\r\nimport { addCard } from \"./card\";\r\nimport { getProfileData, setUserData } from \"./profile\";\r\nimport { editProfile, changeAvatar, cardDelete } from \"./api\";\r\n\r\nconst cardPhoto = document.querySelector('.popup__foto')\r\nconst popupDescription = document.querySelector('.popup__description')\r\nconst popupImage = document.querySelector('.popup_image')\r\nconst placeFormTitleInput = document.querySelector('.popup__form-input_place-title');\r\nconst placeFormSubTitleInput = document.querySelector('.popup__form-input_place-subtitle');\r\nconst profileEditNameInput = document.querySelector('.popup__form-input_edit-title')\r\nconst profileEditAboutInput = document.querySelector('.popup__form-input_edit_subtitle')\r\nconst newPlaceForm = document.querySelector('.popup__form_create')\r\nconst profileEditForm = document.querySelector('.popup__form_edit')\r\nconst popupNewPlace = document.querySelector('.popup_new-place')\r\nconst popupCloseButtons = document.querySelectorAll('.popup__button-close')\r\nconst avatarForm = document.querySelector('.popup__avatar_form')\r\nconst popupProfileEdit = document.querySelector('.popup_profile_edit');\r\nconst avatarInput = document.querySelector('.popup__form-input_edit_avatar')\r\nconst avatarPopup = document.querySelector('.popup_avatar_edit')\r\nconst popupConfirmDelete = document.querySelector('.popup_delete')\r\nconst deleteForm = document.querySelector('.popup__form_delete')\r\nconst profileSaveButton = document.querySelector('.popup__form-submit-save')\r\nconst avatarSaveButton = document.querySelector('.popup__form-submit-avatar')\r\nconst cardSaveButton = document.querySelector('.popup__form-submit-create')\r\n\r\nexport function openPopup(popup) {\r\n    popup.classList.add('popup_opened')\r\n    document.addEventListener('keyup', handleEscClick);\r\n}\r\n\r\nexport function closePopup(popup) {\r\n    popup.classList.remove('popup_opened')\r\n    document.removeEventListener('keyup', handleEscClick);\r\n}\r\n\r\nfunction handleOverlayClick(evt) {\r\n    if (evt.target === evt.currentTarget) {\r\n        closePopup(evt.target);\r\n    };\r\n};\r\n\r\nfunction handleCloseClick(elem) {\r\n    const popup = elem.target.closest('.popup')\r\n    closePopup(popup)\r\n}\r\n\r\nfunction saveTextProfile() {\r\n    profileSaveButton.textContent = 'Сохранение...'\r\n}\r\n\r\nfunction saveTextAvatar() {\r\n    avatarSaveButton.textContent = 'Сохранение...'\r\n}\r\n\r\nfunction saveTextCard() {\r\n    cardSaveButton.textContent = 'Создание...'\r\n}\r\n\r\nfunction handleEscClick(evt) {\r\n    const popupOpened = document.querySelector('.popup_opened')\r\n    if (evt.key === 'Escape' && popupOpened) {\r\n        closePopup(popupOpened)\r\n    }\r\n}\r\n\r\nexport function openViewModal(src, alt) {\r\n    cardPhoto.src = src\r\n    cardPhoto.alt = alt\r\n    popupDescription.textContent = alt\r\n    openPopup(popupImage)\r\n};\r\n\r\nfunction closePopupDeleteCard() {\r\n    closePopup(popupConfirmDelete)\r\n    sessionStorage.removeItem('id-to-delete');\r\n}\r\n\r\n\r\nfunction handleDeleteSubmitClick(evt) {\r\n    evt.preventDefault()\r\n    const itemToDelete = sessionStorage.getItem('id-to-delete')\r\n    const deletedItem = Array.from(document.querySelectorAll('.element')).find(item => {\r\n        return item._id == itemToDelete\r\n    })\r\n    cardDelete(itemToDelete)\r\n        .then(() => {\r\n            deletedItem.remove()\r\n        })\r\n    closePopupDeleteCard()\r\n}\r\n\r\nexport function openDeleteCardConfirm() {\r\n    if (sessionStorage.getItem('id-to-delete')) {\r\n        openPopup(popupConfirmDelete)\r\n    }\r\n}\r\n\r\nexport function openEditAvatar() {\r\n    cleanAvatarForm()\r\n    openPopup(avatarPopup)\r\n}\r\n\r\nfunction cleanNewPlaceForm() {\r\n    placeFormTitleInput.value = ''\r\n    placeFormSubTitleInput.value = ''\r\n}\r\n\r\nfunction cleanAvatarForm() {\r\n    avatarInput.value = ''\r\n}\r\n\r\nfunction getNewCardData() {\r\n    const card = {}\r\n    card.name = placeFormTitleInput.value\r\n    card.link = placeFormSubTitleInput.value\r\n    return card\r\n}\r\n\r\nfunction getNewProfileData() {\r\n    const profile = {}\r\n    profile.name = profileEditNameInput.value\r\n    profile.about = profileEditAboutInput.value\r\n    return profile\r\n}\r\n\r\n\r\nfunction getAvatar() {\r\n    const avatar = avatarInput.value\r\n    return avatar\r\n}\r\n\r\nfunction setProfileInputs(user) {\r\n    profileEditNameInput.value = user.name\r\n    profileEditAboutInput.value = user.about\r\n}\r\n\r\nexport function openEditProfilePopup() {\r\n    setProfileInputs(getProfileData())\r\n    openPopup(popupProfileEdit)\r\n}\r\n\r\nfunction handleProfileSubmit(evt) {\r\n    evt.preventDefault()\r\n    saveTextProfile()\r\n    editProfile(getNewProfileData())\r\n        .then((profile) => {\r\n            setUserData(profile)\r\n        })\r\n        .finally(() => profileSaveButton.textContent = 'Сохранить')\r\n    closePopup(popupProfileEdit)\r\n}\r\n\r\nfunction handleProfileAvatar(evt) {\r\n    evt.preventDefault()\r\n    saveTextAvatar()\r\n    changeAvatar(getAvatar())\r\n        .then(profile => setUserData(profile))\r\n        .finally(() => avatarSaveButton.textContent = 'Сохранить')\r\n    cleanAvatarForm()\r\n    closePopup(avatarPopup)\r\n}\r\n\r\nexport function openNewPlacePopup() {\r\n    cleanNewPlaceForm()\r\n    activeValid()\r\n    openPopup(popupNewPlace)\r\n}\r\n\r\nfunction handleNewPlaceSubmit(evt) {\r\n    evt.preventDefault()\r\n    saveTextCard()\r\n    addCard(getNewCardData())\r\n    closePopup(popupNewPlace)\r\n    cleanNewPlaceForm()\r\n}\r\n\r\nexport function setModalsEventListeners() {\r\n\r\n    newPlaceForm.addEventListener('submit', handleNewPlaceSubmit)\r\n    profileEditForm.addEventListener('submit', handleProfileSubmit)\r\n    avatarForm.addEventListener('submit', handleProfileAvatar)\r\n    deleteForm.addEventListener('submit', handleDeleteSubmitClick)\r\n    Array.from(document.querySelectorAll('.popup')).forEach((popup) => {\r\n        popup.addEventListener('click', handleOverlayClick)\r\n    });\r\n    Array.from(popupCloseButtons).forEach((buttonClose) => {\r\n        buttonClose.addEventListener('click', handleCloseClick)\r\n    });\r\n}\r\n","import { openPopup } from \"./modal\";\r\n\r\nconst profileTitle = document.querySelector('.profile__title');\r\nconst profileSubtitle = document.querySelector('.profile__subtitle');\r\nconst profileAvatar = document.querySelector('.profile__image')\r\n\r\nexport function getProfileData() {\r\n    const name = profileTitle.textContent\r\n    const about = profileSubtitle.textContent\r\n    return { name, about }\r\n}\r\n\r\nexport function setUserData(user) {\r\n    profileTitle.textContent = user.name\r\n    profileSubtitle.textContent = user.about\r\n    profileAvatar.src = user.avatar\r\n}","import '../pages/index.css';\r\nimport { openNewPlacePopup, setModalsEventListeners, openEditProfilePopup, openEditAvatar } from './modal.js'\r\nimport { activeValid } from './validate.js'\r\nimport { getProfile, getCards } from './api.js';\r\nimport { makeCard } from './card';\r\nimport { addCardToContainer } from './container';\r\nimport { setUserData } from './profile';\r\n\r\nconst profileEditButton = document.querySelector('.profile__edit-button');\r\nconst newPlaceButton = document.querySelector('.profile__add-button')\r\nconst avatarEdit = document.querySelector('.profile__avatar')\r\n\r\nPromise.all([getProfile(), getCards()])\r\n    .then(([user, cards]) => {\r\n        setUserData(user)\r\n        sessionStorage.setItem('userId', user._id)\r\n        cards.forEach((item) => addCardToContainer(makeCard(item, user._id)))\r\n    })\r\n    .catch(console.error);\r\n\r\nactiveValid()\r\nsetModalsEventListeners()\r\n\r\nprofileEditButton.addEventListener('click', openEditProfilePopup);\r\n\r\nnewPlaceButton.addEventListener('click', openNewPlacePopup);\r\n\r\navatarEdit.addEventListener('click', openEditAvatar);"],"names":["toggleButtonState","inputList","buttonElement","some","inputElem","validity","valid","hasInvalidInput","classList","remove","removeAttribute","add","setAttribute","activeValid","Array","from","document","querySelectorAll","forEach","formElem","formElement","querySelector","addEventListener","errorElement","id","textContent","hideInputError","errMessage","showInputError","validationMessage","config","baseUrl","header","authorization","checkResponse","res","ok","json","then","err","statusCode","status","Promise","reject","elements","addCardToContainer","cardNode","prepend","element","content","cardSaveButton","handleImageClick","evt","src","alt","target","cardPhoto","popupDescription","openPopup","popupImage","handleLikeClick","cardId","isLiked","card","closest","likesCount","_id","_likes","includes","_userId","fetch","method","headers","likes","map","item","length","handleDeleteClick","sessionStorage","setItem","getItem","popupConfirmDelete","makeCard","cardObj","user_id","cloneNode","elementPhoto","name","link","likeButton","_ownerId","owner","trashButton","el","profileTitle","profileSubtitle","profileAvatar","setUserData","user","about","avatar","placeFormTitleInput","placeFormSubTitleInput","profileEditNameInput","profileEditAboutInput","newPlaceForm","profileEditForm","popupNewPlace","popupCloseButtons","avatarForm","popupProfileEdit","avatarInput","avatarPopup","deleteForm","profileSaveButton","avatarSaveButton","popup","handleEscClick","closePopup","removeEventListener","handleOverlayClick","currentTarget","handleCloseClick","elem","popupOpened","key","cleanNewPlaceForm","value","cleanAvatarForm","profileEditButton","newPlaceButton","avatarEdit","all","cards","catch","console","error","preventDefault","body","JSON","stringify","uploadCard","finally","addCard","profile","editProfile","itemToDelete","deletedItem","find","removeItem","buttonClose"],"sourceRoot":""}
{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-bootcamp/./src/validate.js","webpack://mesto-project-bootcamp/./src/api.js","webpack://mesto-project-bootcamp/./src/container.js","webpack://mesto-project-bootcamp/./src/card.js","webpack://mesto-project-bootcamp/./src/modal.js","webpack://mesto-project-bootcamp/./src/profile.js","webpack://mesto-project-bootcamp/./src/index.js"],"sourcesContent":["const popupCreateForm = document.querySelector('.popup__form_create')\r\nconst popupFormError = document.querySelector('.popup__form-error')\r\nconst popupEditForm = document.querySelector('.popup__form_edit')\r\n\r\nexport function showInputError(formElement, inputElem, errMessage) {\r\n    const errorElement = formElement.querySelector(`.${inputElem.id}-error`);\r\n    inputElem.classList.add('popup__form-input_error');\r\n    errorElement.textContent = errMessage\r\n    errorElement.classList.add(`${inputElem.id}-error_active`);\r\n};\r\n\r\nexport function hideInputError(formElement, inputElem) {\r\n    const errorElement = formElement.querySelector(`.${inputElem.id}-error`);\r\n    inputElem.classList.remove('popup__form-input_error');\r\n    errorElement.classList.remove(`${inputElem.id}-error_active`);\r\n    errorElement.textContent = ''\r\n};\r\n\r\nexport function valid(formElement, inputElem) {\r\n    if (!inputElem.validity.valid) {\r\n        showInputError(formElement, inputElem, inputElem.validationMessage);\r\n    } else {\r\n        hideInputError(formElement, inputElem);\r\n    }\r\n};\r\n\r\nexport function hasInvalidInput(inputList) {\r\n    return inputList.some((inputElem) => {\r\n        return !inputElem.validity.valid\r\n    })\r\n}\r\n\r\nexport function toggleButtonState(inputList, buttonElement) {\r\n    if (hasInvalidInput(inputList)) {\r\n        buttonElement.classList.add('popup__form-submit_inactive');\r\n        buttonElement.setAttribute('disabled', true)\r\n    } else {\r\n        buttonElement.classList.remove('popup__form-submit_inactive');\r\n        buttonElement.removeAttribute('disabled', true)\r\n    }\r\n};\r\n\r\nexport function activeValid() {\r\n    const formList = Array.from(document.querySelectorAll('.popup__form'))\r\n    formList.forEach((formElem) => {\r\n        setEventListeners(formElem)\r\n    })\r\n}\r\nexport function setEventListeners(formElement) {\r\n    const inputList = Array.from(formElement.querySelectorAll('.popup__form-input'));\r\n    const buttonElement = formElement.querySelector('.popup__form-submit');\r\n    toggleButtonState(inputList, buttonElement)\r\n    inputList.forEach((inputElem) => {\r\n        inputElem.addEventListener('input', () => {\r\n            valid(formElement, inputElem)\r\n            toggleButtonState(inputList, buttonElement)\r\n        })\r\n    })\r\n}\r\n\r\n\r\nexport function resetEditForm() {\r\n    popupEditForm.reset()\r\n    popupCreateForm.reset()\r\n    popupFormError.textContent = ''\r\n}\r\n","const config = {\r\n    baseUrl: 'https://nomoreparties.co/v1/wbf-cohort-3/',\r\n    header: {\r\n        authorization: '9035a3ae-3144-4c5d-a2fb-c77d4c0cdff6'\r\n    }\r\n}\r\n\r\nfunction checkResponse(res) {\r\n    if (res.ok) {\r\n        return res.json();\r\n    }\r\n    return res.json()\r\n        .then((err) => {\r\n            err.statusCode = res.status\r\n            return Promise.reject(err);\r\n        })\r\n}\r\n\r\n\r\nexport function getProfile() {\r\n    return fetch(`${config.baseUrl}users/me`, {\r\n        method: 'GET',\r\n        headers: config.header\r\n\r\n    })\r\n        .then(checkResponse)\r\n}\r\n\r\n\r\nexport function toggleLike(cardId, isLiked) {\r\n    return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n        method: isLiked ? 'DELETE' : 'PUT',\r\n        headers: config.header\r\n    })\r\n        .then(checkResponse)\r\n}\r\n\r\n\r\nexport function uploadCard(card) {\r\n    return fetch(`${config.baseUrl}/cards`, {\r\n        method: 'POST',\r\n        headers: {\r\n            authorization: '9035a3ae-3144-4c5d-a2fb-c77d4c0cdff6',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(\r\n            card\r\n        )\r\n\r\n    })\r\n        .then(checkResponse)\r\n}\r\n\r\nexport function editProfile(profile) {\r\n    return fetch(`${config.baseUrl}users/me`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n            authorization: '9035a3ae-3144-4c5d-a2fb-c77d4c0cdff6',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(\r\n            profile\r\n        )\r\n    })\r\n        .then(checkResponse)\r\n\r\n}\r\n\r\nexport function getCards() {\r\n    return fetch(`${config.baseUrl}cards`, {\r\n        method: 'GET',\r\n        headers: config.header\r\n    })\r\n        .then(checkResponse)\r\n}\r\n\r\nexport function cardDelete(cardId) {\r\n\r\n    return fetch(`${config.baseUrl}cards/${cardId}`, {\r\n        method: 'DELETE',\r\n        headers: config.header\r\n    })\r\n        .then(checkResponse)\r\n}\r\n\r\nexport function changeAvatar(link) {\r\n    return fetch(`${config.baseUrl}users/me/avatar`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n            authorization: '9035a3ae-3144-4c5d-a2fb-c77d4c0cdff6',\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n            avatar: `${link}`\r\n        })\r\n    })\r\n        .then(checkResponse)\r\n}","const elements = document.querySelector('.elements')\r\n\r\nexport function addCardToContainer(cardNode) {\r\n    elements.prepend(cardNode)\r\n}","import { toggleLike, uploadCard } from './api.js';\r\nimport { openViewModal, openDeleteCardConfirm } from './modal.js'\r\nimport { addCardToContainer } from './container.js';\r\n\r\nconst element = document.querySelector('#element').content\r\n\r\nfunction handleImageClick(evt) {\r\n    const { target: { src, alt } } = evt;\r\n    openViewModal(src, alt);\r\n};\r\n\r\n\r\nfunction handleLikeClick(evt) {\r\n    const card = evt.target.closest('.element')\r\n    const likesCount = card.querySelector('.element__likes-count')\r\n    toggleLike(card._id, card._likes.includes(card._userId))\r\n        .then((res) => {\r\n            card._likes = res.likes.map((item) => item._id)\r\n            likesCount.textContent = card._likes.length\r\n            if (card._likes.includes(card._userId)) {\r\n                evt.target.classList.add('element__like_black')\r\n            } else {\r\n                evt.target.classList.remove('element__like_black')\r\n            }\r\n        })\r\n}\r\n\r\nfunction handleDeleteClick(evt) {\r\n    const card = evt.target.closest('.element')\r\n    sessionStorage.setItem('id-to-delete', card._id)\r\n    openDeleteCardConfirm()\r\n}\r\n\r\n\r\nexport function makeCard(cardObj, user_id) {\r\n    const card = element.querySelector('.element').cloneNode(true)\r\n    const elementPhoto = card.querySelector('.element__foto')\r\n    card.querySelector('.element__title').textContent = cardObj.name\r\n    const likesCount = card.querySelector('.element__likes-count')\r\n    likesCount.textContent = cardObj.likes.length\r\n    elementPhoto.src = cardObj.link\r\n    elementPhoto.alt = cardObj.name\r\n    const likeButton = card.querySelector('.element__like')\r\n    const cardId = cardObj._id\r\n    card._id = cardObj._id;\r\n    card._userId = user_id;\r\n    card._likes = cardObj.likes.map((item) => item._id)\r\n    card._ownerId = cardObj.owner._id\r\n    const trashButton = card.querySelector('.element__trash')\r\n    if (cardObj.owner._id !== card._userId) {\r\n        trashButton.classList.add('element__trash_inactive')\r\n    }\r\n    cardObj.likes.forEach(el => {\r\n        if (el._id === card._userId) {\r\n            likeButton.classList.add('element__like_black')\r\n        }\r\n    })\r\n    trashButton.addEventListener('click', handleDeleteClick)\r\n\r\n    const isLiked = cardObj.likes.map((item) => item._id).includes('362fa7fb4176231c9cf4f10d')\r\n\r\n    likeButton.addEventListener('click', handleLikeClick)\r\n    elementPhoto.addEventListener('click', handleImageClick)\r\n    return card\r\n}\r\n\r\n\r\nexport function addCard(card) {\r\n    uploadCard(card)\r\n        .then((res) => {\r\n            addCardToContainer(makeCard(res, sessionStorage.getItem(\"userId\")))\r\n        })\r\n}","import { activeValid } from \"./validate\";\r\nimport { addCard } from \"./card\";\r\nimport { getProfileData, setUserData } from \"./profile\";\r\nimport { editProfile, changeAvatar, cardDelete } from \"./api\";\r\n\r\nconst cardPhoto = document.querySelector('.popup__foto')\r\nconst popupDescription = document.querySelector('.popup__description')\r\nconst popupImage = document.querySelector('.popup_image')\r\nconst placeFormTitleInput = document.querySelector('.popup__form-input_place-title');\r\nconst placeFormSubTitleInput = document.querySelector('.popup__form-input_place-subtitle');\r\nconst profileEditNameInput = document.querySelector('.popup__form-input_edit-title')\r\nconst profileEditAboutInput = document.querySelector('.popup__form-input_edit_subtitle')\r\nconst newPlaceForm = document.querySelector('.popup__form_create')\r\nconst profileEditForm = document.querySelector('.popup__form_edit')\r\nconst popupNewPlace = document.querySelector('.popup_new-place')\r\nconst popupCloseButtons = document.querySelectorAll('.popup__button-close')\r\nconst avatarForm = document.querySelector('.popup__avatar_form')\r\nconst popupProfileEdit = document.querySelector('.popup_profile_edit');\r\nconst avatarInput = document.querySelector('.popup__form-input_edit_avatar')\r\nconst avatarPopup = document.querySelector('.popup_avatar_edit')\r\nconst popupConfirmDelete = document.querySelector('.popup_delete')\r\nconst deleteForm = document.querySelector('.popup__form_delete')\r\n\r\nexport function openPopup(popup) {\r\n    popup.classList.add('popup_opened')\r\n    document.addEventListener('keyup', handleEscClick);\r\n}\r\n\r\nexport function closePopup(popup) {\r\n    popup.classList.remove('popup_opened')\r\n    document.removeEventListener('keyup', handleEscClick);\r\n}\r\n\r\nfunction handleOverlayClick(evt) {\r\n    if (evt.target === evt.currentTarget) {\r\n        closePopup(evt.target);\r\n    };\r\n};\r\n\r\nfunction handleCloseClick(elem) {\r\n    const popup = elem.target.closest('.popup')\r\n    closePopup(popup)\r\n}\r\n\r\nfunction handleEscClick(evt) {\r\n    const popupOpened = document.querySelector('.popup_opened')\r\n    if (evt.key === 'Escape' && popupOpened) {\r\n        closePopup(popupOpened)\r\n    }\r\n}\r\n\r\nexport function openViewModal(src, alt) {\r\n    cardPhoto.src = src\r\n    cardPhoto.alt = alt\r\n    popupDescription.textContent = alt\r\n    openPopup(popupImage)\r\n};\r\n\r\nfunction closePopupDeleteCard() {\r\n    closePopup(popupConfirmDelete)\r\n    sessionStorage.removeItem('id-to-delete');\r\n}\r\n\r\n\r\nfunction handleDeleteSubmitClick(evt) {\r\n    evt.preventDefault()\r\n    const itemToDelete = sessionStorage.getItem('id-to-delete')\r\n    const deletedItem = Array.from(document.querySelectorAll('.element')).find(item => {\r\n        return item._id == itemToDelete\r\n    })\r\n    cardDelete(itemToDelete)\r\n        .then(() => {\r\n            deletedItem.remove()\r\n        })\r\n    closePopupDeleteCard()\r\n}\r\n\r\nexport function openDeleteCardConfirm() {\r\n    if (sessionStorage.getItem('id-to-delete')) {\r\n        openPopup(popupConfirmDelete)\r\n    }\r\n}\r\n\r\nexport function openEditAvatar() {\r\n    cleanAvatarForm()\r\n    openPopup(avatarPopup)\r\n}\r\n\r\nfunction cleanNewPlaceForm() {\r\n    placeFormTitleInput.value = ''\r\n    placeFormSubTitleInput.value = ''\r\n}\r\n\r\nfunction cleanAvatarForm() {\r\n    avatarInput.value = ''\r\n}\r\n\r\nfunction getNewCardData() {\r\n    const card = {}\r\n    card.name = placeFormTitleInput.value\r\n    card.link = placeFormSubTitleInput.value\r\n    return card\r\n}\r\n\r\nfunction getNewProfileData() {\r\n    const profile = {}\r\n    profile.name = profileEditNameInput.value\r\n    profile.about = profileEditAboutInput.value\r\n    return profile\r\n}\r\n\r\n\r\nfunction getAvatar() {\r\n    const avatar = avatarInput.value\r\n    return avatar\r\n}\r\n\r\nfunction setProfileInputs(user) {\r\n    profileEditNameInput.value = user.name\r\n    profileEditAboutInput.value = user.about\r\n}\r\n\r\nexport function openEditProfilePopup() {\r\n    setProfileInputs(getProfileData())\r\n    openPopup(popupProfileEdit)\r\n}\r\n\r\nfunction handleProfileSubmit(evt) {\r\n    evt.preventDefault()\r\n    editProfile(getNewProfileData())\r\n        .then((profile) => {\r\n            setUserData(profile)\r\n        })\r\n    closePopup(popupProfileEdit)\r\n}\r\n\r\nfunction handleProfileAvatar(evt) {\r\n    evt.preventDefault()\r\n    changeAvatar(getAvatar())\r\n        .then(profile => setUserData(profile))\r\n    cleanAvatarForm()\r\n    closePopup(avatarPopup)\r\n}\r\n\r\nexport function openNewPlacePopup() {\r\n    cleanNewPlaceForm()\r\n    activeValid()\r\n    openPopup(popupNewPlace)\r\n}\r\n\r\nfunction handleNewPlaceSubmit(evt) {\r\n    evt.preventDefault()\r\n    addCard(getNewCardData())\r\n    closePopup(popupNewPlace)\r\n    cleanNewPlaceForm()\r\n}\r\n\r\nexport function setModalsEventListeners() {\r\n\r\n    newPlaceForm.addEventListener('submit', handleNewPlaceSubmit)\r\n    profileEditForm.addEventListener('submit', handleProfileSubmit)\r\n    avatarForm.addEventListener('submit', handleProfileAvatar)\r\n    deleteForm.addEventListener('submit', handleDeleteSubmitClick)\r\n    Array.from(document.querySelectorAll('.popup')).forEach((popup) => {\r\n        popup.addEventListener('click', handleOverlayClick)\r\n    });\r\n    Array.from(popupCloseButtons).forEach((buttonClose) => {\r\n        buttonClose.addEventListener('click', handleCloseClick)\r\n    });\r\n}\r\n","import { openPopup } from \"./modal\";\r\n\r\nconst profileTitle = document.querySelector('.profile__title');\r\nconst profileSubtitle = document.querySelector('.profile__subtitle');\r\nconst profileAvatar = document.querySelector('.profile__image')\r\n\r\nexport function getProfileData() {\r\n    const name = profileTitle.textContent\r\n    const about = profileSubtitle.textContent\r\n    return { name, about }\r\n}\r\n\r\nexport function setUserData(user) {\r\n    profileTitle.textContent = user.name\r\n    profileSubtitle.textContent = user.about\r\n    profileAvatar.src = user.avatar\r\n}","import '../pages/index.css';\r\nimport { openNewPlacePopup, setModalsEventListeners, openEditProfilePopup, openEditAvatar } from './modal.js'\r\nimport { activeValid } from './validate.js'\r\nimport { getProfile, getCards } from './api.js';\r\nimport { makeCard } from './card';\r\nimport { addCardToContainer } from './container';\r\nimport { setUserData } from './profile';\r\n\r\nconst profileEditButton = document.querySelector('.profile__edit-button');\r\nconst newPlaceButton = document.querySelector('.profile__add-button')\r\nconst avatarEdit = document.querySelector('.profile__avatar')\r\n\r\nPromise.all([getProfile(), getCards()])\r\n    .then(([user, cards]) => {\r\n        setUserData(user)\r\n        sessionStorage.setItem('userId', user._id)\r\n        cards.forEach((item) => addCardToContainer(makeCard(item, user._id)))\r\n    })\r\n    .catch(console.error);\r\n\r\nactiveValid()\r\nsetModalsEventListeners()\r\n\r\nprofileEditButton.addEventListener('click', openEditProfilePopup);\r\n\r\nnewPlaceButton.addEventListener('click', openNewPlacePopup);\r\n\r\navatarEdit.addEventListener('click', openEditAvatar);"],"names":["toggleButtonState","inputList","buttonElement","some","inputElem","validity","valid","hasInvalidInput","classList","remove","removeAttribute","add","setAttribute","activeValid","Array","from","document","querySelectorAll","forEach","formElem","formElement","querySelector","addEventListener","errorElement","id","textContent","hideInputError","errMessage","showInputError","validationMessage","config","baseUrl","header","authorization","checkResponse","res","ok","json","then","err","statusCode","status","Promise","reject","elements","addCardToContainer","cardNode","prepend","element","content","handleImageClick","evt","src","alt","target","cardPhoto","popupDescription","openPopup","popupImage","handleLikeClick","cardId","isLiked","card","closest","likesCount","_id","_likes","includes","_userId","fetch","method","headers","likes","map","item","length","handleDeleteClick","sessionStorage","setItem","getItem","popupConfirmDelete","makeCard","cardObj","user_id","cloneNode","elementPhoto","name","link","likeButton","_ownerId","owner","trashButton","el","profileTitle","profileSubtitle","profileAvatar","setUserData","user","about","avatar","placeFormTitleInput","placeFormSubTitleInput","profileEditNameInput","profileEditAboutInput","newPlaceForm","profileEditForm","popupNewPlace","popupCloseButtons","avatarForm","popupProfileEdit","avatarInput","avatarPopup","deleteForm","popup","handleEscClick","closePopup","removeEventListener","handleOverlayClick","currentTarget","handleCloseClick","elem","popupOpened","key","cleanNewPlaceForm","value","cleanAvatarForm","profileEditButton","newPlaceButton","avatarEdit","all","cards","catch","console","error","preventDefault","body","JSON","stringify","uploadCard","addCard","profile","editProfile","itemToDelete","deletedItem","find","removeItem","buttonClose"],"sourceRoot":""}
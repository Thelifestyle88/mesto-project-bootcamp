{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-bootcamp/./src/validate.js","webpack://mesto-project-bootcamp/./src/api.js","webpack://mesto-project-bootcamp/./src/container.js","webpack://mesto-project-bootcamp/./src/card.js","webpack://mesto-project-bootcamp/./src/modal.js","webpack://mesto-project-bootcamp/./src/profile.js","webpack://mesto-project-bootcamp/./src/index.js"],"sourcesContent":["function showInputError(formElement, inputElem, errMessage) {\r\n    const errorElement = formElement.querySelector(`.${inputElem.id}-error`);\r\n    inputElem.classList.add('popup__form-input_error');\r\n    errorElement.textContent = errMessage\r\n    errorElement.classList.add(`${inputElem.id}-error_active`);\r\n};\r\n\r\nfunction hideInputError(formElement, inputElem) {\r\n    const errorElement = formElement.querySelector(`.${inputElem.id}-error`);\r\n    inputElem.classList.remove('popup__form-input_error');\r\n    errorElement.classList.remove(`${inputElem.id}-error_active`);\r\n    errorElement.textContent = ''\r\n};\r\n\r\nfunction valid(formElement, inputElem) {\r\n    if (!inputElem.validity.valid) {\r\n        showInputError(formElement, inputElem, inputElem.validationMessage);\r\n    } else {\r\n        hideInputError(formElement, inputElem);\r\n    }\r\n};\r\n\r\nfunction hasInvalidInput(inputList) {\r\n    return inputList.some((inputElem) => {\r\n        return !inputElem.validity.valid\r\n    })\r\n}\r\n\r\nexport function toggleButtonState(inputList, buttonElement) {\r\n    if (hasInvalidInput(inputList)) {\r\n        buttonElement.classList.add('popup__form-submit_inactive');\r\n        buttonElement.setAttribute('disabled', true)\r\n    } else {\r\n        buttonElement.classList.remove('popup__form-submit_inactive');\r\n        buttonElement.removeAttribute('disabled', true)\r\n    }\r\n};\r\n\r\nexport function activeValid() {\r\n    const formList = Array.from(document.querySelectorAll('.popup__form'))\r\n    formList.forEach((formElem) => {\r\n        setEventListeners(formElem)\r\n    })\r\n}\r\nfunction setEventListeners(formElement) {\r\n    const inputList = Array.from(formElement.querySelectorAll('.popup__form-input'));\r\n    const buttonElement = formElement.querySelector('.popup__form-submit');\r\n    toggleButtonState(inputList, buttonElement)\r\n    inputList.forEach((inputElem) => {\r\n        inputElem.addEventListener('input', () => {\r\n            valid(formElement, inputElem)\r\n            toggleButtonState(inputList, buttonElement)\r\n        })\r\n    })\r\n}\r\n\r\n\r\nexport function resetEditForm(formElement) {\r\n    const inputList = Array.from(formElement.querySelectorAll('.popup__form-input'));\r\n    const buttonElement = formElement.querySelector('.popup__form-submit');\r\n    inputList.forEach((inputElem) => {\r\n        valid(formElement, inputElem)\r\n    })\r\n    toggleButtonState(inputList, buttonElement)\r\n}\r\n","const config = {\r\n    baseUrl: 'https://nomoreparties.co/v1/wbf-cohort-3/',\r\n    header: {\r\n        authorization: '9035a3ae-3144-4c5d-a2fb-c77d4c0cdff6'\r\n    }\r\n}\r\n\r\nfunction checkResponse(res) {\r\n    if (res.ok) {\r\n        return res.json();\r\n    }\r\n    return res.json()\r\n        .then((err) => {\r\n            err.statusCode = res.status\r\n            return Promise.reject(err);\r\n        })\r\n}\r\n\r\n\r\nexport function getProfile() {\r\n    return fetch(`${config.baseUrl}users/me`, {\r\n        method: 'GET',\r\n        headers: config.header\r\n\r\n    })\r\n        .then(checkResponse)\r\n}\r\n\r\n\r\nexport function toggleLike(cardId, isLiked) {\r\n    return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n        method: isLiked ? 'DELETE' : 'PUT',\r\n        headers: config.header\r\n    })\r\n        .then(checkResponse)\r\n}\r\n\r\n\r\nexport function uploadCard(card) {\r\n    return fetch(`${config.baseUrl}/cards`, {\r\n        method: 'POST',\r\n        headers: {\r\n            authorization: '9035a3ae-3144-4c5d-a2fb-c77d4c0cdff6',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(\r\n            card\r\n        )\r\n\r\n    })\r\n        .then(checkResponse)\r\n}\r\n\r\nexport function editProfile(profile) {\r\n    return fetch(`${config.baseUrl}users/me`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n            authorization: '9035a3ae-3144-4c5d-a2fb-c77d4c0cdff6',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(\r\n            profile\r\n        )\r\n    })\r\n        .then(checkResponse)\r\n\r\n}\r\n\r\nexport function getCards() {\r\n    return fetch(`${config.baseUrl}cards`, {\r\n        method: 'GET',\r\n        headers: config.header\r\n    })\r\n        .then(checkResponse)\r\n}\r\n\r\nexport function cardDelete(cardId) {\r\n\r\n    return fetch(`${config.baseUrl}cards/${cardId}`, {\r\n        method: 'DELETE',\r\n        headers: config.header\r\n    })\r\n        .then(checkResponse)\r\n}\r\n\r\nexport function changeAvatar(link) {\r\n    return fetch(`${config.baseUrl}users/me/avatar`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n            authorization: '9035a3ae-3144-4c5d-a2fb-c77d4c0cdff6',\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n            avatar: `${link}`\r\n        })\r\n    })\r\n        .then(checkResponse)\r\n}","const elements = document.querySelector('.elements')\r\n\r\nexport function addCardToContainer(cardNode) {\r\n    elements.prepend(cardNode)\r\n}","import { toggleLike, uploadCard } from './api.js';\r\nimport { openViewModal, openDeleteCardConfirm } from './modal.js'\r\nimport { addCardToContainer } from './container.js';\r\n\r\nconst element = document.querySelector('#element').content\r\nconst cardSaveButton = document.querySelector('.popup__form-submit-create')\r\n\r\nfunction handleImageClick(evt) {\r\n    const { target: { src, alt } } = evt;\r\n    openViewModal(src, alt);\r\n};\r\n\r\n\r\nfunction handleLikeClick(evt) {\r\n    const card = evt.target.closest('.element')\r\n    const likesCount = card.querySelector('.element__likes-count')\r\n    toggleLike(card._id, card._likes.includes(card._userId))\r\n        .then((res) => {\r\n            card._likes = res.likes.map((item) => item._id)\r\n            likesCount.textContent = card._likes.length\r\n            if (card._likes.includes(card._userId)) {\r\n                evt.target.classList.add('element__like_black')\r\n            } else {\r\n                evt.target.classList.remove('element__like_black')\r\n            }\r\n        })\r\n}\r\n\r\nfunction handleDeleteClick(evt) {\r\n    const card = evt.target.closest('.element')\r\n    sessionStorage.setItem('id-to-delete', card._id)\r\n    openDeleteCardConfirm()\r\n}\r\n\r\n\r\nexport function makeCard(cardObj, user_id) {\r\n    const card = element.querySelector('.element').cloneNode(true)\r\n    const elementPhoto = card.querySelector('.element__foto')\r\n    card.querySelector('.element__title').textContent = cardObj.name\r\n    const likesCount = card.querySelector('.element__likes-count')\r\n    likesCount.textContent = cardObj.likes.length\r\n    elementPhoto.src = cardObj.link\r\n    elementPhoto.alt = cardObj.name\r\n    const likeButton = card.querySelector('.element__like')\r\n    const cardId = cardObj._id\r\n    card._id = cardObj._id;\r\n    card._userId = user_id;\r\n    card._likes = cardObj.likes.map((item) => item._id)\r\n    card._ownerId = cardObj.owner._id\r\n    const trashButton = card.querySelector('.element__trash')\r\n    if (cardObj.owner._id !== card._userId) {\r\n        trashButton.classList.add('element__trash_inactive')\r\n    }\r\n    cardObj.likes.forEach(el => {\r\n        if (el._id === card._userId) {\r\n            likeButton.classList.add('element__like_black')\r\n        }\r\n    })\r\n    trashButton.addEventListener('click', handleDeleteClick)\r\n    likeButton.addEventListener('click', handleLikeClick)\r\n    elementPhoto.addEventListener('click', handleImageClick)\r\n    return card\r\n}\r\n\r\n\r\nexport function addCard(card) {\r\n    uploadCard(card)\r\n        .then((res) => {\r\n            addCardToContainer(makeCard(res, sessionStorage.getItem(\"userId\")))\r\n        })\r\n        .finally(() => cardSaveButton.textContent = 'Создать')\r\n}","import { activeValid, resetEditForm } from \"./validate\";\r\nimport { addCard } from \"./card\";\r\nimport { getProfileData, setUserData } from \"./profile\";\r\nimport { editProfile, changeAvatar, cardDelete } from \"./api\";\r\n\r\nconst cardPhoto = document.querySelector('.popup__foto')\r\nconst popupDescription = document.querySelector('.popup__description')\r\nconst popupImage = document.querySelector('.popup_image')\r\nconst placeFormTitleInput = document.querySelector('.popup__form-input_place-title');\r\nconst placeFormSubTitleInput = document.querySelector('.popup__form-input_place-subtitle');\r\nconst profileEditNameInput = document.querySelector('.popup__form-input_edit-title')\r\nconst profileEditAboutInput = document.querySelector('.popup__form-input_edit_subtitle')\r\nconst newPlaceForm = document.querySelector('.popup__form_create')\r\nconst profileEditForm = document.querySelector('.popup__form_edit')\r\nconst popupNewPlace = document.querySelector('.popup_new-place')\r\nconst popupCloseButtons = document.querySelectorAll('.popup__button-close')\r\nconst avatarForm = document.querySelector('.popup__avatar_form')\r\nconst popupProfileEdit = document.querySelector('.popup_profile_edit');\r\nconst avatarInput = document.querySelector('.popup__form-input_edit_avatar')\r\nconst avatarPopup = document.querySelector('.popup_avatar_edit')\r\nconst popupConfirmDelete = document.querySelector('.popup_delete')\r\nconst deleteForm = document.querySelector('.popup__form_delete')\r\nconst profileSaveButton = document.querySelector('.popup__form-submit-save')\r\nconst avatarSaveButton = document.querySelector('.popup__form-submit-avatar')\r\nconst cardSaveButton = document.querySelector('.popup__form-submit-create')\r\n\r\nexport function openPopup(popup) {\r\n    popup.classList.add('popup_opened')\r\n    document.addEventListener('keyup', handleEscClick);\r\n}\r\n\r\nexport function closePopup(popup) {\r\n    popup.classList.remove('popup_opened')\r\n    document.removeEventListener('keyup', handleEscClick);\r\n}\r\n\r\nfunction handleOverlayClick(evt) {\r\n    if (evt.target === evt.currentTarget) {\r\n        closePopup(evt.target);\r\n    };\r\n};\r\n\r\nfunction handleCloseClick(elem) {\r\n    const popup = elem.target.closest('.popup')\r\n    closePopup(popup)\r\n}\r\n\r\nfunction saveTextProfile() {\r\n    profileSaveButton.textContent = 'Сохранение...'\r\n}\r\n\r\nfunction saveTextAvatar() {\r\n    avatarSaveButton.textContent = 'Сохранение...'\r\n}\r\n\r\nfunction saveTextCard() {\r\n    cardSaveButton.textContent = 'Создание...'\r\n}\r\n\r\nfunction handleEscClick(evt) {\r\n    const popupOpened = document.querySelector('.popup_opened')\r\n    if (evt.key === 'Escape' && popupOpened) {\r\n        closePopup(popupOpened)\r\n    }\r\n}\r\n\r\nexport function openViewModal(src, alt) {\r\n    cardPhoto.src = src\r\n    cardPhoto.alt = alt\r\n    popupDescription.textContent = alt\r\n    openPopup(popupImage)\r\n};\r\n\r\nfunction closePopupDeleteCard() {\r\n    closePopup(popupConfirmDelete)\r\n    sessionStorage.removeItem('id-to-delete');\r\n}\r\n\r\n\r\nfunction handleDeleteSubmitClick(evt) {\r\n    evt.preventDefault()\r\n    const itemToDelete = sessionStorage.getItem('id-to-delete')\r\n    const deletedItem = Array.from(document.querySelectorAll('.element')).find(item => {\r\n        return item._id == itemToDelete\r\n    })\r\n    cardDelete(itemToDelete)\r\n        .then(() => {\r\n            deletedItem.remove()\r\n        })\r\n    closePopupDeleteCard()\r\n}\r\n\r\nexport function openDeleteCardConfirm() {\r\n    if (sessionStorage.getItem('id-to-delete')) {\r\n        openPopup(popupConfirmDelete)\r\n    }\r\n}\r\n\r\nexport function openEditAvatar() {\r\n    cleanAvatarForm()\r\n    resetEditForm(avatarForm)\r\n    openPopup(avatarPopup)\r\n}\r\n\r\nfunction cleanNewPlaceForm() {\r\n    placeFormTitleInput.value = ''\r\n    placeFormSubTitleInput.value = ''\r\n}\r\n\r\nfunction cleanAvatarForm() {\r\n    avatarInput.value = ''\r\n}\r\n\r\nfunction getNewCardData() {\r\n    const card = {}\r\n    card.name = placeFormTitleInput.value\r\n    card.link = placeFormSubTitleInput.value\r\n    return card\r\n}\r\n\r\nfunction getNewProfileData() {\r\n    const profile = {}\r\n    profile.name = profileEditNameInput.value\r\n    profile.about = profileEditAboutInput.value\r\n    return profile\r\n}\r\n\r\n\r\nfunction getAvatar() {\r\n    const avatar = avatarInput.value\r\n    return avatar\r\n}\r\n\r\nfunction setProfileInputs(user) {\r\n    profileEditNameInput.value = user.name\r\n    profileEditAboutInput.value = user.about\r\n}\r\n\r\nexport function openEditProfilePopup() {\r\n    setProfileInputs(getProfileData())\r\n    resetEditForm(profileEditForm)\r\n    openPopup(popupProfileEdit)\r\n}\r\n\r\nfunction handleProfileSubmit(evt) {\r\n    evt.preventDefault()\r\n    saveTextProfile()\r\n    editProfile(getNewProfileData())\r\n        .then((profile) => {\r\n            setUserData(profile)\r\n        })\r\n        .finally(() => profileSaveButton.textContent = 'Сохранить')\r\n    closePopup(popupProfileEdit)\r\n}\r\n\r\nfunction handleProfileAvatar(evt) {\r\n    evt.preventDefault()\r\n    saveTextAvatar()\r\n    changeAvatar(getAvatar())\r\n        .then(profile => setUserData(profile))\r\n        .finally(() => avatarSaveButton.textContent = 'Сохранить')\r\n    cleanAvatarForm()\r\n    closePopup(avatarPopup)\r\n}\r\n\r\nexport function openNewPlacePopup() {\r\n    cleanNewPlaceForm()\r\n    resetEditForm(newPlaceForm)\r\n    openPopup(popupNewPlace)\r\n}\r\n\r\nfunction handleNewPlaceSubmit(evt) {\r\n    evt.preventDefault()\r\n    saveTextCard()\r\n    addCard(getNewCardData())\r\n    closePopup(popupNewPlace)\r\n    cleanNewPlaceForm()\r\n}\r\n\r\nexport function setModalsEventListeners() {\r\n\r\n    newPlaceForm.addEventListener('submit', handleNewPlaceSubmit)\r\n    profileEditForm.addEventListener('submit', handleProfileSubmit)\r\n    avatarForm.addEventListener('submit', handleProfileAvatar)\r\n    deleteForm.addEventListener('submit', handleDeleteSubmitClick)\r\n    Array.from(document.querySelectorAll('.popup')).forEach((popup) => {\r\n        popup.addEventListener('click', handleOverlayClick)\r\n    });\r\n    Array.from(popupCloseButtons).forEach((buttonClose) => {\r\n        buttonClose.addEventListener('click', handleCloseClick)\r\n    });\r\n}\r\n","const profileTitle = document.querySelector('.profile__title');\r\nconst profileSubtitle = document.querySelector('.profile__subtitle');\r\nconst profileAvatar = document.querySelector('.profile__image')\r\n\r\nexport function getProfileData() {\r\n    const name = profileTitle.textContent\r\n    const about = profileSubtitle.textContent\r\n    return { name, about }\r\n}\r\n\r\nexport function setUserData(user) {\r\n    profileTitle.textContent = user.name\r\n    profileSubtitle.textContent = user.about\r\n    profileAvatar.src = user.avatar\r\n}","import '../pages/index.css';\r\nimport { openNewPlacePopup, setModalsEventListeners, openEditProfilePopup, openEditAvatar } from './modal.js'\r\nimport { activeValid } from './validate.js'\r\nimport { getProfile, getCards } from './api.js';\r\nimport { makeCard } from './card';\r\nimport { addCardToContainer } from './container';\r\nimport { setUserData } from './profile';\r\n\r\nconst profileEditButton = document.querySelector('.profile__edit-button');\r\nconst newPlaceButton = document.querySelector('.profile__add-button')\r\nconst avatarEdit = document.querySelector('.profile__avatar')\r\n\r\nPromise.all([getProfile(), getCards()])\r\n    .then(([user, cards]) => {\r\n        setUserData(user)\r\n        sessionStorage.setItem('userId', user._id)\r\n        cards.forEach((item) => addCardToContainer(makeCard(item, user._id)))\r\n    })\r\n    .catch(console.error);\r\n\r\nactiveValid()\r\nsetModalsEventListeners()\r\n\r\nprofileEditButton.addEventListener('click', openEditProfilePopup);\r\n\r\nnewPlaceButton.addEventListener('click', openNewPlacePopup);\r\n\r\navatarEdit.addEventListener('click', openEditAvatar);"],"names":["valid","formElement","inputElem","validity","errorElement","querySelector","id","classList","remove","textContent","hideInputError","errMessage","add","showInputError","validationMessage","toggleButtonState","inputList","buttonElement","some","hasInvalidInput","removeAttribute","setAttribute","resetEditForm","Array","from","querySelectorAll","forEach","config","baseUrl","header","authorization","checkResponse","res","ok","json","then","err","statusCode","status","Promise","reject","elements","document","addCardToContainer","cardNode","prepend","element","content","cardSaveButton","handleImageClick","evt","src","alt","target","cardPhoto","popupDescription","openPopup","popupImage","handleLikeClick","cardId","isLiked","card","closest","likesCount","_id","_likes","includes","_userId","fetch","method","headers","likes","map","item","length","handleDeleteClick","sessionStorage","setItem","getItem","popupConfirmDelete","makeCard","cardObj","user_id","cloneNode","elementPhoto","name","link","likeButton","_ownerId","owner","trashButton","el","addEventListener","profileTitle","profileSubtitle","profileAvatar","setUserData","user","about","avatar","placeFormTitleInput","placeFormSubTitleInput","profileEditNameInput","profileEditAboutInput","newPlaceForm","profileEditForm","popupNewPlace","popupCloseButtons","avatarForm","popupProfileEdit","avatarInput","avatarPopup","deleteForm","profileSaveButton","avatarSaveButton","popup","handleEscClick","closePopup","removeEventListener","handleOverlayClick","currentTarget","handleCloseClick","elem","popupOpened","key","cleanNewPlaceForm","value","cleanAvatarForm","profileEditButton","newPlaceButton","avatarEdit","all","cards","catch","console","error","formElem","preventDefault","body","JSON","stringify","uploadCard","finally","addCard","profile","editProfile","itemToDelete","deletedItem","find","removeItem","buttonClose"],"sourceRoot":""}